<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="/static/favicon.svg" type="image/svg+xml" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>启动器镜像状态</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>启动器镜像</h1>
      <div class="actions">
        <button id="show-api-docs">API 文档</button>
        <button id="refresh">手动刷新</button>
      </div>
    </header>

    <main>
      <section id="api-docs" class="hidden">
        <h2>API 文档</h2>
        <div class="docs-content">
            <p>本镜像服务提供以下 API 供开发者使用：</p>
            
            <div class="api-endpoint">
                <h3>1. 获取所有版本状态</h3>
                <div class="method">GET /api/status</div>
                <p>返回所有启动器及其版本的详细信息。</p>
            </div>

            <div class="api-endpoint">
                <h3>2. 获取指定启动器状态</h3>
                <div class="method">GET /api/status/{launcher}</div>
                <p>返回指定启动器的所有版本信息。</p>
            </div>

            <div class="api-endpoint">
                <h3>3. 获取最新版本信息</h3>
                <div class="method">GET /api/latest</div>
                <p>返回所有启动器的最新版本号及相关信息。</p>
            </div>

            <div class="api-endpoint">
                <h3>4. 获取指定启动器最新版本</h3>
                <div class="method">GET /api/latest/{launcher}</div>
                <p>返回指定启动器的最新版本信息。</p>
            </div>
            
            <div class="api-endpoint">
                <h3>5. 获取统计数据</h3>
                <div class="method">GET /api/stats</div>
                <p>返回访问量、下载量、排行和地域分布等统计数据。</p>
            </div>

             <div class="api-endpoint">
                <h3>6. 触发手动扫描</h3>
                <div class="method">POST /api/scan</div>
                <p>触发服务器重新扫描上游仓库更新。</p>
            </div>
        </div>
      </section>

      <section id="statistics-section">
        <h2>数据统计</h2>
        <div class="stats-overview">
            <div class="stat-card">
                <h3>总访问量</h3>
                <div class="stat-value" id="total-visits">-</div>
            </div>
            <div class="stat-card">
                <h3>总下载量</h3>
                <div class="stat-value" id="total-downloads">-</div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stats-panel">
                <h3>最近 30 天趋势</h3>
                <div class="chart-container" id="daily-chart"></div>
            </div>
            <div class="stats-panel">
                <h3>热门下载 (Top 10)</h3>
                <div class="list-container" id="top-downloads"></div>
            </div>
            <div class="stats-panel">
                <h3>访客地域分布</h3>
                <div class="list-container" id="geo-dist"></div>
            </div>
        </div>
      </section>

      <section>
        <h2>版本信息</h2>
        <div id="status"></div>
      </section>

      <section>
        <h2>文件浏览</h2>
        <div>
          <input type="text" id="path" placeholder="相对路径，例如：." value="." />
          <button id="list">浏览</button>
        </div>
        <pre id="files"></pre>
      </section>
    </main>

    <footer>
      <p>Lemwood Mirror</p>
    </footer>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
